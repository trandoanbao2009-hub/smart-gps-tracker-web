<!doctype html>
<html lang="vi">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Location Radius Map</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">

  <style>@view-transition { navigation: auto; }</style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="app-wrapper"><!-- Loading Screen -->
   <div class="loading-screen" id="loadingScreen">
    <div class="logo-wrapper">
     <div class="glow-orb"></div>
     <div class="loading-rings">
      <div class="ring"></div>
      <div class="ring"></div>
      <div class="ring"></div>
     </div>
     <div class="orbit-container">
      <div class="orbit-particle"></div>
      <div class="orbit-particle"></div>
      <div class="orbit-particle"></div>
      <div class="orbit-particle"></div>
     </div>
     <div class="loading-logo"><img src="https://lhbs.edu.vn/wp-content/uploads/2021/06/ky-niem-10-nam-lhbs.png" alt="Logo Láº¡c Há»“ng" onerror="this.src=''; this.alt='Logo'; this.style.display='none';">
     </div>
    </div>
    <div class="loading-text-container">
     <div class="loading-text">
      Äang táº£i
     </div>
     <div class="loading-progress">
      <div class="loading-progress-bar"></div>
     </div>
    </div>
   </div><!-- Searching Screen -->
   <div class="searching-screen" id="searchingScreen">
    <div class="searching-content">
     <div class="searching-radar-container">
      <div class="searching-radar">
       <div class="radar-wave"></div>
       <div class="radar-wave"></div>
       <div class="radar-wave"></div>
       <div class="radar-wave"></div>
       <div class="radar-sweep"></div>
       <div class="radar-center"></div>
      </div>
      <div class="radar-icon">
       ğŸ”
      </div>
     </div>
     <h2 class="searching-text">Äang tÃ¬m kiáº¿m thiáº¿t bá»‹ 
      <div class="searching-dots"><span class="dot"></span> <span class="dot"></span> <span class="dot"></span>
      </div></h2>
     <p class="searching-subtext">Vui lÃ²ng chá» trong giÃ¢y lÃ¡t...</p>
     <div class="searching-progress-ring">
      <svg class="progress-ring-circle"><circle class="progress-ring-bg" cx="60" cy="60" r="50"></circle> <circle class="progress-ring-fill" cx="60" cy="60" r="50"></circle>
      </svg>
      <div class="progress-percentage" id="progressPercentage">
       0%
      </div>
     </div>
    </div>
   </div><!-- Device ID Screen -->
   <div class="device-id-screen" id="deviceIdScreen">
    <div class="device-id-container">
     <div class="device-id-card">
      <div class="device-id-header">
       <div class="device-id-icon">
        ğŸ”‘
       </div>
       <h1 class="device-id-title">XÃ¡c Thá»±c Thiáº¿t Bá»‹</h1>
       <p class="device-id-subtitle">Vui lÃ²ng nháº­p ID thiáº¿t bá»‹ cá»§a báº¡n Ä‘á»ƒ tiáº¿p tá»¥c</p>
      </div>
      <div class="device-id-input-group"><label class="device-id-input-label" for="deviceIdInput">ID Thiáº¿t Bá»‹</label>
       <div class="device-id-input-wrapper"><input type="text" id="deviceIdInput" class="device-id-input" placeholder="Nháº­p ID thiáº¿t bá»‹" autocomplete="off">
       </div>
      </div><button class="device-id-submit" id="deviceIdSubmit"> <span>Tiáº¿p tá»¥c</span> <span>â†’</span> </button>
     </div>
    </div>
   </div><!-- Selection Screen -->
   <div class="selection-screen" id="selectionScreen">
    <div class="selection-container">
     <div class="selection-card">
      <div class="selection-header">
       <h1 class="selection-title" id="pageTitle">Báº£n Äá»“ Khu Vá»±c</h1>
       <p class="selection-subtitle">Chá»n bÃ¡n kÃ­nh Ä‘á»ƒ hiá»ƒn thá»‹ khu vá»±c xung quanh Ä‘á»‹a Ä‘iá»ƒm</p>
      </div>
      <div class="radius-grid">
       <div class="radius-card" data-radius="500"><span class="radius-icon">âœ…</span>
        <div class="radius-value">
         500m
        </div>
        <div class="radius-label">
         Khu vá»±c gáº§n
        </div>
       </div>
       <div class="radius-card" data-radius="1000"><span class="radius-icon">âœ…</span>
        <div class="radius-value">
         1km
        </div>
        <div class="radius-label">
         Khu vá»±c vá»«a
        </div>
       </div>
       <div class="radius-card" data-radius="2000"><span class="radius-icon">âœ…</span>
        <div class="radius-value">
         2km
        </div>
        <div class="radius-label">
         Khu vá»±c rá»™ng
        </div>
       </div>
       <div class="radius-card" data-radius="5000"><span class="radius-icon">âœ…</span>
        <div class="radius-value">
         5km
        </div>
        <div class="radius-label">
         Khu vá»±c xa
        </div>
       </div>
      </div>
      <div class="divider"><span class="divider-text">Hoáº·c</span>
      </div>
      <div class="custom-input-group"><label class="custom-input-label" for="customRadius">TÃ¹y chá»‰nh bÃ¡n kÃ­nh</label>
       <div class="custom-input-wrapper"><input type="number" id="customRadius" class="custom-input" placeholder="Nháº­p giÃ¡ trá»‹ tá»« 500 - 10000" min="500" max="10000"> <span class="input-unit">mÃ©t</span>
       </div>
      </div><button class="action-button" id="submitBtn"> <span>Xem báº£n Ä‘á»“</span> <span>â†’</span> </button>
     </div>
    </div>
   </div><!-- Map Screen -->
   <div class="map-screen" id="mapScreen">
    <div class="map-top-bar">
     <div class="map-content">
      <div class="map-logo"><img src="https://lhbs.edu.vn/wp-content/uploads/2021/06/ky-niem-10-nam-lhbs.png" alt="Logo Láº¡c Há»“ng" onerror="this.src=''; this.alt='Logo'; this.style.display='none';">
      </div>
      <div class="map-info-wrapper">
       <h2 class="map-heading" id="mapTitle">Báº£n Äá»“ Khu Vá»±c</h2>
       <div class="map-location-info"><span class="location-icon">ğŸ“</span> <span id="locationNameDisplay">TrÆ°á»ng Song Ngá»¯ Láº¡c Há»“ng</span>
       </div>
       <div class="map-location-info" style="margin-top: 4px;"><span class="location-icon">ğŸ“Œ</span> <span id="locationAddressDisplay">152/16 Huá»³nh VÄƒn Nghá»‡, Bá»­u Long, BiÃªn HÃ²a, Äá»“ng Nai</span>
       </div>
      </div>
     </div>
    </div>
    <div class="map-view">
     <div class="controls-panel"><button class="control-button" id="backBtn"> <span class="button-icon">â†</span> <span>Quay láº¡i</span> </button> <button class="control-button" id="drawRouteBtn"> <span class="button-icon">âœï¸</span> <span>Váº½ tuyáº¿n Ä‘Æ°á»ng</span> </button> <button class="control-button" id="testRouteBtn" style="display: none;"> <span class="button-icon">ğŸš¶</span> <span>Test theo Ä‘Æ°á»ng</span> </button> <button class="control-button" id="testStayBtn"> <span class="button-icon">â°</span> <span>Test Ä‘á»©ng lÃ¢u (60p)</span> </button> <button class="control-button" id="testIntrusionBtn"> <span class="button-icon">ğŸ§ª</span> <span>Kiá»ƒm tra xÃ¢m nháº­p</span> </button>
     
<button class="control-button danger" id="deleteRouteBtn" style="display: none;">
            <span class="button-icon">ğŸ—‘ï¸</span>
            <span>XÃ³a Tuyáº¿n ÄÆ°á»ng</span>
        </button>

     <button id="stopTestsBtn" class="action-btn danger" style="display: none;">
        <span class="button-icon">ğŸ›‘</span><span>Dá»«ng Kiá»ƒm Tra</span>
      </button>
        </div>
     <div class="circles-list-panel" id="circlesListPanel" style="display: none;">
      <div class="circles-list-title">
       Danh sÃ¡ch vÃ²ng trÃ²n (<span id="circleCount">0</span>/10)
      </div>
      <div id="circlesList"></div>
     </div>
     <div class="info-panel" id="infoPanel">
      <div class="info-title">
       ThÃ´ng tin khu vá»±c
      </div>
      <div class="info-row"><span class="info-label">BÃ¡n kÃ­nh:</span> <span class="info-value" id="radiusDisplay">-</span>
      </div>
      <div class="info-row"><span class="info-label">Diá»‡n tÃ­ch:</span> <span class="info-value" id="areaDisplay">-</span>
      </div>
     </div>
     <div id="map"></div>
    </div>
   </div>
  </div>
  
  <script src="notification.js"></script>
  <script src="app.js"></script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9aa1417f07b803e7',t:'MTc2NTA4MTQ5Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
 </body>
</html>